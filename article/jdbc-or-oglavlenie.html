<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="/_assets/main.css" />

    <title>JDBC | Оглавление - Knowledge</title>
  </head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">Knowledge</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">JDBC | Оглавление</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1600655015409"
                  >2020-09-21 05:23</time
                ></span
              >
              <span
                >Updated At：<time datetime="1603784569414"
                  >2020-10-27 10:42</time
                ></span
              >
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="jdbc">JDBC</h1>
<table>
<thead>
<tr>
<th><a href="/article/java-or-oglavlenie">Java</a></th>
<th><a href="/article/bd-or-oglavlenie">BD</a></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td><a href="/article/jdbc-or-oglavlenie">JDBC</a></td>
</tr>
</tbody>
</table>
<h2 id="оглавление">Оглавление</h2>
<ol>
<li><strong>ACID</strong></li>
<li><strong>Транзакции в СУБД</strong>
<ul>
<li><em>Уровень изоляций транзакций</em></li>
</ul>
</li>
<li><strong>In-memory база данных H2</strong></li>
<li><strong>JDBC, роль JDBC в стеке технологий</strong></li>
<li><strong>ORM Pattern "Executor"</strong></li>
</ol>
<hr />
<h2 id="acid">ACID</h2>
<blockquote>
<p><em>Набор свойств транзакции базы данных, которые гарантируют целостность данных, даже в случае технических сбоев.</em></p>
</blockquote>
<ul>
<li><strong>Atomicity</strong> - <em>атомарность (либо целиком, либо не выполнется)</em></li>
<li><strong>Consistency</strong> - <em>консистентность (типо состояние не ломается)</em></li>
<li><strong>Isolation</strong> - <em>изоляция (изменения в разных транзакциях не видны)</em></li>
<li><strong>Durability</strong> - <em>долговечность (если транзакция закончена, то данные сохранены)</em></li>
</ul>
<p><img src="/_resources/8376c2780c2943adb7de1ae73469fc9d.png" /></p>
<hr />
<h2 id="транзакции-в-субд">Транзакции в СУБД</h2>
<p><strong>Транзакция</strong> - <em>группа последовательных операций, которая представляет собой логическую еденицу работы с данными.</em></p>
<blockquote>
<p>Часто в БД “транзакции” это не транзакции, с точки зрения ACID.</p>
</blockquote>
<p><img src="/_resources/b884958dc9c6442f9649a42e80694361.png" /></p>
<p>======================</p>
<h3 id="уровень-изоляций-транзакций">Уровень изоляций транзакций</h3>
<p><strong>Уровень изолированности транзакций</strong> - <em>условное значение определяющее, в какой мере в результате выполнения параллельных транзакций в СУБД допускается получение несогласоованных данных.</em></p>
<blockquote>
<p>Если все делать по ACID, то БД будет очень медленной</p>
</blockquote>
<p><img src="/_resources/8f6688686b4a4cb9830377e0c65ce9a1.png" /></p>
<p><em>Уровни изоляции транзакций можно рассматривать как механизм, позволяющий решать проблему параллельного доступа к данным и изменения данных без явных ручных блокировок.</em></p>
<ul>
<li><strong>Serializable</strong> (хорошая, но никто не будет так делать) — <em>транзакции полностью изолируются друг от друга и ни одна транзакция ни коим образом не влияет на другие. Самая низкая степень параллельности транзакций.</em></li>
<li><strong>Repeatable read</strong> (фантомное чтение) — <em>изменения данных, которые были прочитаны в транзакции ранее в транзакцию не попадают, другие транзакции не могут изменять данные, прочитанные этой транзакцией. Возможен эффект фантомного чтения, степерь параллельности транзакций выше, чем у Serializable.</em></li>
<li><strong>Read commited</strong> (фантомное чтение + неповторяющееся чтение) — <em>транзакции получают изменения в данных от других транзакций, которые были успешно подтверждены. Возможны эффекты фантомного чтения и неповторяемого чтения. Этот уровень изоляции обычно используется по умолчанию в базах данных и обеспечивает хорошую степень параллельности транзакций.</em></li>
<li><strong>Read uncommited</strong> (грязное + неповторяющееся + фантомное)— <em>самый низший уровень изоляции транзакций, который гарантирует только, что изменения, внёсённые одной транзакцией, не будут перезаписаные другой транзакцией. Подвержден всем эффектам влияния транзакций друг на друга. Обеспечивает наивысшую степерь параллельности транзакций.</em></li>
</ul>
<blockquote>
<p>В Oracle есть Serializable, Read Commited(по умолчанию), Read Only</p>
</blockquote>
<p>Плохие эффекты:
Грязное чтение — чтение данных, добавленных или изменённых транзакцией, которая впоследствии не подтвердится (откатится)
Неповторяющееся чтение — при повторном чтении в рамках одной транзакции ранее прочитанные данные оказываются изменёнными
Пример: читаем строку, например сколько денег у клиента пытаемся снять деньги, а потом оказывается что денег нет
Фантомное чтение— одна транзакция в ходе своего выполнения несколько раз выбирает множество строк по одним и тем же критериям. Другая транзакция в интервалах между этими выборками добавляет или удаляет строки или изменяет столбцы некоторых строк, используемых в критериях выборки первой транзакции, и успешно заканчивается. В результате получится, что одни и те же выборки в первой транзакции дают разные множества строк.
Пример: агрегационные данные, например считаем кол-во отрицательных счетов, а потом оказывается их больше</p>
</div>
      </article>
    </div>
  </body>
</html>
